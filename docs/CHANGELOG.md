# ChatBot Change Log

---
The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/)

## [9.4.0] - 2023-02-02

### 新增

- `手动触发` 工作流功能，结合 `专字登记插件` 插件使用，可以在 Facebook 聊天界面手动发送工作流给用户

### 修复

- 给 `24` 小时外线索发信息触发 24 小时政策

## [9.3.5] - 2023-02-01

### 修复

- 切换成长工具自动暂停问题

## [9.3.4] - 2023-01-31

### 新增

- 节点历史信息，解决已发出信息无法走流程问题，`input` 组件五天内有效

## [9.3.2] - 2023-01-30

### 修复

- `input` 组件重试次数为零时，无法走流程问题

## [9.3.1] - 2023-01-23

### 修复

- 修复部分漏评论问题

- 解决 404 问题

## [9.3.0] - 2023-01-15

## 更新

- 兼容旧同步接口，不返回评论时间戳

## [9.2.0] - 2023-01-23

### 修复

- 新用户无法回复评论

- `input` 按钮点击不生效

## [9.2.0] - 2023-01-23
### 新增

- 增加 `用户输入` 组件，可以针对线索手动输入的信息走不同的流程,也可以保存线索的输入信息。[详情请看](/guide/workflow/component/input.md)

### 更新

- 评论链接增加评论时间戳，支持准确分析某个时间段某个帖文的来人

### 修复

- 随机节点后每个分支节点和按钮点击次数不再显示为零

## [9.1.0] - 2023-01-08

### 新增

- 谷歌脚本批量更新图片功能，[详情请看](https://docs.google.com/document/d/1EoK4H5VEg7ZalQS2X6_T0I3gNWMvM0HiahBUhyV9uw0/edit)

- 日志页面增加 `错误对照表`

- 日志页面增加鼠标悬停 `描述` 列时浮现解决方案

- 评论成长工具停止切换时显示红灯并提示警告

### 修复

- 点击开启统计后的链接不会再跳转到 `ChatBot` 登录页面

### 移除

- ADGuard 广告弹窗检测
## [9.0.0] - 2022-12-29

### 新增

- `评论多留言` 功能，允许一次性回复多条评论。<span style="color:red" >严禁</span>绑定多个机器人同时开启此功能来回复 4 条及以上的评论。

- `多平台切换评论成长工具`，实现定时切换平台发消息，主要目的是为缓解 「 api 速率」问题。[详情请看](/guide/widget/switch.md)

### 更新

- 增加评论流程中第一条消息节点的类型检测，如果不是 `评论回复` 就无法发布工作流

### 修复

- 修复 `评论回复` 类型的节点还能从 「下一步」连接其他节点问题

### 移除

- 来线索时的响铃通知

## [8.0.0] - 2022-12-13

### 新增

- 首页增加 `多专页订阅者统计走势图`，最多可同时查看 `20` 个专页的数据，并有爆贴高亮提示。[详情请看](/guide/statistic.html#多专页订阅者走势图)

- 专页管理 > 列表 中增加一列专页 ID，直接单击即可复制

### 更新

- 固定各个专页头像的位置，便于定位查找。（之前位置会变动，永远都会将当前专页移动到第一个）

- 切换专页增加搜索功能

### 修复

- 修复漏评论线索问题

## [7.0.0] - 2022-11-26

### 新增

- 增加变量库，并允许通过 `谷歌表格脚本` 批量更新变量，以此方案可以解决频繁替换鱼塘链接问题。[详情请看](/guide/setting/var.md)

- 跨平台跨专业复制节点。[详情请看](/guide/workflow/advance.html#跨平台跨专业批量复制节点)

- `魔术字段`中增加 `page_name`，自动填充当前专页的名字

### 更新

- 允许评论触发器后直接连接随机节点

- 按钮后可以在不链接任何节点时发布

- 畅聊账户增加查看日志权限

- 设置 `欢迎消息`、`默认回复` 工作流时，默认**开启**运行状态

## [6.0.1] - 2022-09-11

### 更新

- 评论成长工具增加 `清空` 功能，能直接删除所有备选评论。如需大量替换评论的，可以先清空再导入

- 工作流中的 `跳转链接` 按钮增加「是否统计」开关按钮，默认关闭，表示不统计点击次数。如果打开统计，在线索点击按钮时可能会出现 「您正在前往 FB 以外的链接」的提示，导致线索不敢继续点击

## [6.0.0] - 2022-08-10

### 新增

- 显示**非订阅者**列表，可以由此查看当天触发评论成长工具的且从未未回复信息的线索。当天的未订阅者加上当天来的订阅者就是后天当天来的总数.

- 过滤器中增加 `posts`、`is_subscribed` 条件。选择 `posts` 条件后输入 `帖文ID ` 即可筛选出触发过此帖文评论成长工具的线索。 `is_subscribed` 条件用于工作流中，组合上 `last_user_interaction_at` 互动时间后可以对非订阅者做频率限制，[详情请看](/guide/workflow/node/condition.html#新用户和五天前互动过的用户才触发流程-包括未订阅用户也是五天)

- 消息节点增加 `特殊消息` 类型，可允许在**24** 小时外发消息，或者是评论工作流中使用正常发送多条消息，不受评论流程只发一条消息的限制。。注意，使用评论成长工具的工作流第一个消息节点必须是**评论回复**，这不能变。如果想通过 `特殊消息` 新类型发送更多的消息，请注意连续发送消息的数量，如果数量过多，线索反感后举报专页，引起 `facebook` 审查可能会导致专页**受限**，所以不要贪多。

- 评论成长工具增加评论导入功能，允许直接从谷歌表格上粘贴多行评论并复制过来，一次性生成多条评论。此功能支持魔术字段，[详情请看](/guide/widget/advance.html#评论导入)


### 修复

- 工作流发布时处理 start flow 节点绑定的工作流关系，解决旧工作流触发器中仍显示关联关系问题

- 选择题按钮后必须带一个 start flow 节点或者消息节点。之前限制必须包含消息节点。

- 去除延时节点设置延时无法超过 24 小时问题，因为使用了 `特殊消息` 类型的消息拥有在 24 小时外发消息的能力。

## [5.0.2] - 2022-07-09

### 新增

- 复制共享工作流时，一并复制成长工具

### 修复

- 少量线索用插件登记后还无法导出 `fb_id` 问题

## [5.0.1] - 2022-06-19

### 修复

- 使用 `full_name` 等魔术字段的评论无法发送
## [5.0.0] - 2022-06-06

### 新增

- 针对 `畅聊后台插件` 分类过滤用户功能，新增 `查询线索状态`、`标记线索`、`取消标记线索` 三个接口

## [4.1.0] - 2022-05-15

### 新增

- 消息节点中增加 [音频](./guide/workflow/component/audio.md)、[视频](./guide/workflow/component/video.md)、 [文件](./guide/workflow/component/file.md) 三个组件。允许给用户发送音频等各样文件，提高流程的真实性和趣味性。比如给线索发送自己录制的自我介绍或歌曲。建议用音频而不是视频，视频加载速度会比较慢，而且一般需要更多的流量，更好的网络

## [4.0.0] - 2022-04-26

### 新增

- 工作流编辑页面添加 `批量编辑` 节点功能，按住 `Shift` 键能框选多个节点，框选后可 **拖动**、**复制**、**删除**

- 专页管理页面添加 `删除专页` 按钮，可以移除不需要的专页。此功能会解除机器人和专页的绑定关系，并删除系统中此专页相关的<span style="color:red" >所有数据</span>，请慎用

### 修复

- `typing` 延时气泡改用 `异步毫秒定时器` 实现，解决 `sleep` 阻塞进程导致并发弱问题

- 断开链接的 `条件节点` 在发布时不再被校验，避免带来困扰

- 条件节点设置 `last_user_interaction_at` 对评论用户限制触发频率不生效问题

### 优化

- 底层改用 `swoole` 极大提高并发能力

## [3.0.0] - 2022-04-20

### 更新

- `条件节点` 允许设置**多分支**，简化按时间发畅聊账户步骤

- 支持导出 `评论线索` 的贴文来源

- 谷歌表格同步数据增加 `评论线索` 的贴文来源

### 修复

- 工作流发布因按钮 output 为空未指定目标节点失败时**无弹窗提示**

### 其他

- 新增 `消息节点` 时，默认创建 `文本组件` 并聚焦光标




